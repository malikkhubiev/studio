console.log("Liquid animation script loaded (No-Module Version)");const lenis=new Lenis({duration:1,easing:e=>1-Math.pow(1-e,3),orientation:"vertical",gestureOrientation:"vertical",smoothWheel:!0,wheelMultiplier:1,touchMultiplier:2,syncTouch:!1});function createCoordsTransformer(e){const t=e.createSVGPoint();return function(o){return t.x=o.clientX,t.y=o.clientY,t.matrixTransform(e.getScreenCTM().inverse())}}function pointsInPath(e,t){const o=[],n=e.getTotalLength();for(let r=0;r<t;r++){const a=e.getPointAtLength(r/(t-1)*n);o.push({x:a.x,y:a.y})}return o}function formatPoints(e,t){if(e=[...e],Array.isArray(e[0])||(e=e.map((({x:e,y:t})=>[e,t]))),t){const t=e[e.length-1],o=e[e.length-2],n=e[0],r=e[1];e.unshift(t),e.unshift(o),e.push(n),e.push(r)}return e.flat()}function spline(e,t=1,o=!1){const n=(e=formatPoints(e,o)).length,r=n-4;let a="M"+[o?e[2]:e[0],o?e[3]:e[1]];const s=o?n-4:n-2;for(let n=o?2:0;n<s;n+=2){const o=n?e[n-2]:e[0],s=n?e[n-1]:e[1],i=e[n+0],c=e[n+1],l=e[n+2],u=e[n+3];a+="C"+[i+(l-o)/6*t,c+(u-s)/6*t,l-((n!==r?e[n+4]:l)-i)/6*t,u-((n!==r?e[n+5]:u)-c)/6*t,l,u]}return a}function createLiquidPath(e,t){try{const o=pointsInPath(e,t.detail);console.log(`Path points generated: ${o.length}`);const n=o.map((e=>({x:e.x,y:e.y}))),r=o.map((e=>({x:e.x,y:e.y}))),a={x:0,y:0},s=e.getBBox(),i=Math.max(s.width,s.height),c=Math.min(1,Math.max(.2,i/500));console.log(`Path size: ${i.toFixed(0)}px, Size Factor: ${c.toFixed(2)}`);const l=e.closest("svg");let u;try{const e=l.createSVGPoint();u=function(t){if(!l.getScreenCTM())return{x:0,y:0};e.x=t.clientX,e.y=t.clientY;const o=e.matrixTransform(l.getScreenCTM().inverse());return{x:o.x,y:o.y}}}catch(e){return void console.error("Error creating coordinate transformer:",e)}t.range.x,t.range.y;let d=1e3*Math.random(),g={x:0,y:0},m={x:0,y:0},p=!1;new IntersectionObserver((e=>{e.forEach((e=>{p=e.isIntersecting}))}),{threshold:0}).observe(l),gsap.ticker.add((()=>{if(!p)return;d+=.006,m.x*=.9,m.y*=.9;const o=spline(r.map(((e,t)=>{const o=t/r.length,n=15*Math.sin(.6*d+o*Math.PI*2)*c,a=15*Math.cos(.5*d+o*Math.PI*2)*c,s=8*Math.sin(-1.5*d+o*Math.PI*4)*c,i=8*Math.cos(-1.3*d+o*Math.PI*4)*c,l=5*Math.sin(1.2*d+.3*t)*c,u=5*Math.cos(1.1*d+.3*t)*c;return{x:e.x+n+s+l,y:e.y+a+i+u}})),t.tension,t.close);gsap.set(e,{attr:{d:o}})})),window.addEventListener("mousemove",(e=>{const o=u(e);o&&(m.x=o.x-g.x,m.y=o.y-g.y,g.x=o.x,g.y=o.y,a.x=o.x,a.y=o.y,r.forEach(((e,o)=>{const r=n[o],s=a.x-r.x,i=a.y-r.y,c=s*s+i*i;if(c<t.range.x*t.range.x){const o=1-Math.sqrt(c)/t.range.x,n=7,a=r.x+m.x*o*n,s=r.y+m.y*o*n,i=gsap.utils.clamp(r.x-150,r.x+150,a),l=gsap.utils.clamp(r.y-150,r.y+150,s);gsap.to(e,{x:i,y:l,ease:"power2.out",overwrite:"auto",duration:.9,onComplete:()=>{gsap.to(e,{x:r.x,y:r.y,ease:"elastic.out(1, 0.3)",duration:4.5})}})}else(Math.abs(e.x-r.x)>.1||Math.abs(e.y-r.y)>.1)&&gsap.to(e,{x:r.x,y:r.y,ease:"elastic.out(1, 0.3)",duration:2.5,overwrite:"auto"})})))}))}catch(e){console.error("Error in createLiquidPath:",e)}}function initCharSwapAnimation(){document.querySelectorAll("[data-char-swap]").forEach((e=>{const t=e.textContent;e.textContent="";const o=t.split(""),n=[];o.forEach((t=>{const o=document.createElement("span");o.className="char-swap-container";const r=document.createElement("span");r.className="char-swap-original",r.textContent=" "===t?" ":t;const a=document.createElement("span");a.className="char-swap-clone",a.textContent=" "===t?" ":t,"."==t&&(r.classList.add("maincolor"),a.classList.add("maincolor")),o.appendChild(r),o.appendChild(a),e.appendChild(o),n.push({container:o,original:r,clone:a})})),setTimeout((()=>{startCharSwapLoop(n)}),2500)}))}function startCharSwapLoop(e){!function t(){const o=function(e){const t=[...e];for(let e=t.length-1;e>0;e--){const o=Math.floor(Math.random()*(e+1));[t[e],t[o]]=[t[o],t[e]]}return t}(e),n=Math.random()<.5?1:2,r=o.slice(0,n);let a=0;r.forEach((e=>{setTimeout((()=>{animateChar(e)}),a),a+=150+150*Math.random()}));const s=3e3+1e3*Math.random();setTimeout(t,s)}()}function animateChar(e){const{original:t,clone:o}=e,n=t.offsetWidth;gsap.set(o,{x:-(n+4)}),gsap.set(t,{x:0});const r="power2.inOut";gsap.to(t,{x:n+4,duration:.5,ease:r}),gsap.to(o,{x:0,duration:.5,ease:r,onComplete:()=>{gsap.set(t,{x:-(n+4)}),gsap.set(o,{x:0})}})}function initCustomCursor(){const e=document.createElement("div");e.className="custom-cursor",document.body.appendChild(e);const t=document.createElement("div");t.className="view-work-cursor",t.textContent="Посмотреть►",document.body.appendChild(t);const o=document.createElement("div");o.className="contact-title-cursor",o.innerHTML='<img src="images/contact.webp" alt="">',document.body.appendChild(o);const n=document.querySelectorAll(".project-image, .work-card"),r=document.querySelector(".contact-title"),a=document.querySelectorAll("a:not(.work-card), button, .menu-btn, .menu-link, .social-link, .contact-social-link, .download-cv-btn");let s=0,i=0,c=0,l=0,u=0,d=0,g=!1;!function e(){if(g){const e=s-c,t=i-l;c+=.12*e,l+=.12*t;const n=Math.max(-15,Math.min(15,.3*e)),r=Math.max(-15,Math.min(15,.3*t));u+=.15*(n-u),d+=.15*(r-d),o.style.left=c+"px",o.style.top=l+"px",o.style.transform=`translate(-50%, -50%) scale(1) skew(${u}deg, ${d}deg)`}requestAnimationFrame(e)}(),document.addEventListener("mousemove",(o=>{s=o.clientX,i=o.clientY,e.style.left=s+"px",e.style.top=i+"px",t.style.left=s+"px",t.style.top=i+"px"})),a.forEach((t=>{t.addEventListener("mouseenter",(()=>{e.classList.contains("on-project")||(e.classList.add("hovering"),document.body.classList.add("show-default-cursor"))})),t.addEventListener("mouseleave",(()=>{e.classList.remove("hovering"),document.body.classList.remove("show-default-cursor")}))})),n.forEach((o=>{o.addEventListener("mouseenter",(()=>{e.classList.add("on-project"),e.classList.remove("hovering"),t.classList.add("visible")})),o.addEventListener("mouseleave",(()=>{e.classList.remove("on-project"),t.classList.remove("visible")}))})),r&&(r.addEventListener("mouseenter",(()=>{e.classList.add("on-contact-title"),g=!0,c=s,l=i,o.style.left=c+"px",o.style.top=l+"px",o.classList.add("visible")})),r.addEventListener("mouseleave",(()=>{e.classList.remove("on-contact-title"),g=!1,o.classList.remove("visible")}))),document.addEventListener("mouseleave",(()=>{e.classList.add("hidden"),t.classList.remove("visible")})),document.addEventListener("mouseenter",(()=>{e.classList.remove("hidden")}))}function initContactWaves(){const e=document.getElementById("waveCanvas");if(!e)return;const t=e.getContext("2d"),o=e.parentElement;let n={x:-1e3,y:-1e3},r={x:-1e3,y:-1e3},a=[];const s=40,i=120,c="rgba(230, 225, 221, 1)",l=1,u=120,d=25,g=.08,m=.03,p=16;let h=[];function y(){const t=o.getBoundingClientRect();e.width=t.width,e.height=t.height,function(){h=[];const t=p,o=(e.height-2*t)/(s+1);for(let n=0;n<s;n++){const r=t+o*(n+1),a=[];for(let o=0;o<=i;o++){const n=t+o/i*(e.width-2*t);a.push({x:n,baseY:r,y:r,velocity:0})}h.push(a)}}()}let f=!1,x=null;function v(){f?(n.x+=(r.x-n.x)*g,n.y+=(r.y-n.y)*g,a.push({x:n.x,y:n.y}),a.length>20&&a.shift(),h.forEach((e=>{e.forEach((e=>{let t=0;a.forEach(((o,n)=>{const r=(20-n)/20,a=o.x-e.x,s=o.y-e.baseY,i=Math.sqrt(a*a+s*s);if(i<u){const e=1-i/u;t+=e*e*e*d*(r*r)}}));const o=e.baseY+t-e.y;e.velocity+=.15*o,e.velocity*=.75,e.y+=e.velocity,0===t&&(e.y+=(e.baseY-e.y)*m)}))})),t.clearRect(0,0,e.width,e.height),t.strokeStyle=c,t.lineWidth=l,h.forEach((e=>{t.beginPath(),t.moveTo(e[0].x,e[0].y);for(let o=1;o<e.length-1;o++){const n=(e[o].x+e[o+1].x)/2,r=(e[o].y+e[o+1].y)/2;t.quadraticCurveTo(e[o].x,e[o].y,n,r)}const o=e[e.length-1];t.lineTo(o.x,o.y),t.stroke()})),x=requestAnimationFrame(v)):x=null}function w(t){const o=e.getBoundingClientRect();r.x=t.clientX-o.left,r.y=t.clientY-o.top}function b(){r.x=-1e3,r.y=-1e3}y(),window.addEventListener("resize",y);const C=document.querySelector(".contact-section");C?(C.addEventListener("mousemove",w),C.addEventListener("mouseleave",b)):(o.addEventListener("mousemove",w),o.addEventListener("mouseleave",b));new IntersectionObserver((e=>{e.forEach((e=>{f=e.isIntersecting,f&&!x&&v()}))}),{threshold:0}).observe(e)}function initPsychedelicDoor(){const e=[document.getElementById("psychedelicCanvas"),document.getElementById("heroPsychedelicCanvas")].filter((e=>null!==e));0!==e.length&&e.forEach((e=>initSinglePsychedelicCanvas(e)))}function initSinglePsychedelicCanvas(e){const t=e.getContext("2d"),o=e.width,n=e.height,r=o/2,a=n/2,s=[["M",1378.1,99.2],["c",-43.3,8.2,-89.7,14.9,-131.8,-2],["c",-35.2,-14.1,-58.5,-43.8,-90.6,-62.4],["c",-24.5,-14.2,-50.9,-25.2,-78.7,-30.9],["c",-56.4,-11.4,-114.5,1.4,-156.4,42.1],["c",-56,54.4,-83.5,133.2,-176.9,123],["c",-67.4,-7.4,-100.6,-63,-158.9,-87],["c",-102.3,-42.1,-179.8,16.3,-218.2,74.8],["s",-78,70.9,-78,70.9],["c",0,0,-80.3,36.8,-162.5,-27.2],["C",43.8,136.4,0,132,0,132],["c",97.1,44.5,133.5,87.4,133.5,87.4],["c",45.9,34.5,102.3,49.1,157.2,28.2],["c",58.4,-22.3,79.9,-71.8,124.1,-110.6],["c",41.2,-36.2,113.2,-43.1,161,-15.5],["c",44.7,25.7,79,63.1,126.7,85.9],["c",74.4,35.7,150.4,2.9,205.1,-51.5],["c",36.9,-36.7,72.7,-82.9,129.4,-84.2],["c",35.7,-.8,61.9,18.3,89.5,37.9],["c",32.8,23.3,66.6,45.7,103.1,62.9],["c",43.7,20.5,89.3,31.4,137.5,30.8],["c",14.6,-.2,87.8,1.2,91.2,-18.9],["c",0,-.1,19,-111.8,19,-111.8],["c",-2.1,12.1,-87.1,24.4,-99.2,26.7],["Z"]];function i(e,t){return t?257.3-e:-e}function c(e,t,o){return e+(t-e)*o}let l=0;let u=!1,d=null;function g(){if(!u)return void(d=null);t.clearRect(0,0,o,n),t.fillStyle="#1A1A1A",t.fillRect(0,0,o,n),t.save(),t.translate(r,a),l+=.3,t.rotate(l*Math.PI/180);const e=Math.max(o,n)/1477.3*1.2;t.fillStyle="rgba(161, 153, 255, 0.5)";const m=function(e){let t="";for(const o of s){const n=o[0];if("Z"===n){t+="Z";continue}const r=n===n.toUpperCase(),a=o.slice(1);t+=n;for(let o=0;o<a.length;o++){const n=o%2==1;let s=a[o];n&&(s=c(s,i(s,r),e)),t+=(o>0?",":"")+s.toFixed(1)}}return t}(0);for(let o=0;o<36;o++){t.save(),t.rotate(10*o*Math.PI/180),t.scale(e,e),t.translate(0,-128.65);const n=new Path2D(m);t.fill(n),t.restore()}t.restore(),d=requestAnimationFrame(g)}new IntersectionObserver((e=>{e.forEach((e=>{u=e.isIntersecting,u&&!d&&g()}))}),{threshold:0}).observe(e)}function initCountdownTimer(){const e=document.querySelectorAll(".countdown-timer");function t(){const t=new Date,o=new Date;o.setHours(16,20,0,0),t>=o&&o.setDate(o.getDate()+1);const n=o-t,r=Math.floor(n/36e5),a=Math.floor(n%36e5/6e4),s=Math.floor(n%6e4/1e3),i=`${r.toString().padStart(2,"0")}:${a.toString().padStart(2,"0")}:${s.toString().padStart(2,"0")}`;e.forEach((e=>e.textContent=i))}0!==e.length&&(t(),setInterval(t,1e3))}function initDoorNavigation(){const e=document.querySelectorAll(".contact-door-open, .hero-door-open");if(0===e.length)return;const t=window.location.pathname.split("/").pop()||"index.html";function o(){if(function(){const e=new Date;return 16===e.getHours()&&20===e.getMinutes()}()){const e=t+"#hero";window.location.href="dramatic-exit.html?from="+encodeURIComponent(e)}}setInterval(o,1e3),o(),e.forEach((e=>{e.style.cursor="pointer"}))}function initHeroExitFade(){const e=document.querySelector(".hero-exit"),t=document.querySelector("main");e&&t&&ScrollTrigger.create({trigger:t,start:"top top",end:"50% top",onLeave:()=>{e.style.opacity="0"},onEnterBack:()=>{e.style.opacity="1"}})}function initWorksPageAnimations(){if(!document.querySelector(".works-section"))return;const e=document.querySelector(".works-title-favorite"),t=document.querySelector(".works-title-main");e&&t&&(gsap.set([e,t],{opacity:0,y:30}),gsap.to(e,{opacity:1,y:0,duration:.8,ease:"power2.out",delay:.2}),gsap.to(t,{opacity:1,y:0,duration:.8,ease:"power2.out",delay:.35}));const o=document.querySelectorAll(".work-card");if(o.length>0){const e=o[0];gsap.set(e,{opacity:0}),gsap.to(e,{opacity:1,duration:.8,ease:"power2.out",delay:.5})}o.forEach(((e,t)=>{0!==t&&(gsap.set(e,{opacity:0}),ScrollTrigger.create({trigger:e,start:"top 85%",once:!0,onEnter:()=>{gsap.to(e,{opacity:1,duration:.6,ease:"power2.out"})}}))}))}function initViewAllMagnetic(){const e=document.querySelector(".view-all-circle");if(!e)return;const t=e.querySelector(".view-all-circle-icon");if(!t)return;t.getBoundingClientRect();t.outerHTML='\n        <svg class="view-all-circle-icon beige-flower-svg smallinvisible" viewBox="0 0 31.1 28.3" xmlns="http://www.w3.org/2000/svg">\n            <path class="beige-petal-right" d="M23.3,9.7c3.5-2,3.5-7,0-9s-7.8.5-7.8,4.5v18c0,4,4.3,6.5,7.8,4.5s3.5-7,0-9c3.5,2,7.8-.5,7.8-4.5s-4.3-6.5-7.8-4.5Z" fill="#e6e1dd"/>\n            <path class="beige-petal-left" d="M7.8.7c-3.5,2-3.5,7,0,9C4.3,7.7,0,10.2,0,14.2s4.3,6.5,7.8,4.5c-3.5,2-3.5,7,0,9s7.8-.5,7.8-4.5V5.2C15.6,1.2,11.2-1.3,7.8.7Z" fill="#e6e1dd"/>\n            <g class="beige-flower-face">\n                <path class="beige-eye-left" d="M14.3,11.3c-1.2,1.2-3.2,1.2-4.4,0" fill="none" stroke="#1a1a1a" stroke-linecap="round" stroke-miterlimit="10"/>\n                <path class="beige-eye-right" d="M21.1,11.3c-1.2,1.2-3.2,1.2-4.4,0" fill="none" stroke="#1a1a1a" stroke-linecap="round" stroke-miterlimit="10"/>\n                <path class="beige-mouth" d="M22.2,14.3c-3.7,3.7-9.6,3.7-13.3,0" fill="none" stroke="#1a1a1a" stroke-linecap="round" stroke-miterlimit="10"/>\n            </g>\n        </svg>\n    ';const o=e.querySelector(".beige-flower-svg"),n=o.querySelector(".beige-petal-left"),r=o.querySelector(".beige-flower-face"),a=document.createElement("div");a.className="flower-hug-cursor triangleCursor",a.style.fontSize="50px",a.innerHTML="\n        ▲\n    ",document.body.appendChild(a);const s=a.querySelector(".purple-petal-right"),i=a.querySelector(".purple-flower-face"),c=a.querySelector(".purple-arm");let l=0,u=0,d=0,g=0,m=!1,p=!1,h=!1,y=null;function f(){p=!1,gsap.to(s,{scaleX:1,x:0,duration:.3,ease:"power2.out"}),gsap.to(i,{x:0,scale:1,rotation:0,duration:.3,ease:"power2.out"}),gsap.to(c,{opacity:0,x:0,y:0,rotation:0,duration:.25}),gsap.to(n,{scaleX:1,x:0,duration:.3,ease:"power2.out"}),gsap.to(r,{x:0,scale:1,rotation:0,duration:.3,ease:"power2.out"})}!function t(){if(m||h){const t=function(){if(y&&(m||h))return y;const t=e.getBoundingClientRect();return{x:t.left+t.width/2,y:t.top+t.height/2}}(),o=t.x-l,x=t.y-u,v=Math.sqrt(o*o+x*x),w=e.getBoundingClientRect().width,b=20*Math.max(0,1-v/w),C=-o/v*b||0,S=-x/v*b||0,E=1+.12*Math.max(0,1-v/w);gsap.to(e,{x:C,y:S,scale:E,duration:.4,ease:"power2.out"});const L=.25*Math.max(0,1-v/100);let k=l+o*L,M=u+x*L;v<60&&!p&&(p=!0,gsap.to(s,{scaleX:.8,x:-3,transformOrigin:"left center",duration:.4,ease:"power2.out"}),gsap.to(i,{x:2,scale:.85,rotation:10,transformOrigin:"center center",duration:.35,ease:"power2.out"}),gsap.to(c,{opacity:1,x:-5,y:1,rotation:15,transformOrigin:"left center",duration:.3}),gsap.to(n,{scaleX:.8,x:3,transformOrigin:"right center",duration:.4,ease:"power2.out"}),gsap.to(r,{x:2,scale:.85,rotation:-10,transformOrigin:"center center",duration:.35,ease:"power2.out"})),v>90&&p&&f(),p&&(k=t.x+C-12.5,M=t.y+S),d+=.12*(k-d),g+=.12*(M-g),a.style.left=d+"px",a.style.top=g+"px"}requestAnimationFrame(t)}(),document.addEventListener("mousemove",(e=>{l=e.clientX,u=e.clientY}));let x=null;e.addEventListener("mouseenter",(()=>{x&&(clearTimeout(x),x=null),function(){gsap.set(e,{x:0,y:0,scale:1});const t=e.getBoundingClientRect();y={x:t.left+t.width/2,y:t.top+t.height/2}}(),m=!0,h=!1,d=l,g=u,a.classList.add("visible");const t=document.querySelector(".custom-cursor");t&&t.classList.add("on-flower-hug")})),e.addEventListener("mouseleave",(()=>{m=!1,h=!0,f(),gsap.to(e,{x:0,y:0,scale:1,duration:.5,ease:"power2.out"}),x=setTimeout((()=>{h=!1,y=null,a.classList.remove("visible");const e=document.querySelector(".custom-cursor");e&&e.classList.remove("on-flower-hug")}),400)}))}function initProjectCardAnimations(){const e=document.querySelectorAll(".project-name");0!==e.length&&e.forEach((e=>{const t=function(e){const t=e.textContent;return e.textContent="",t.split("").forEach((t=>{const o=document.createElement("span");o.className="char",o.textContent=" "===t?" ":t,e.appendChild(o)})),e.querySelectorAll(".char")}(e),o=e.closest(".project-card"),n=Array.from(t).filter(((e,t)=>t%2==1)),r=Array.from(t).filter(((e,t)=>t%2==0));gsap.set(n,{yPercent:120}),gsap.set(r,{yPercent:-120}),o&&(o.addEventListener("mouseenter",(()=>{gsap.to(n,{yPercent:0,duration:.5,ease:"power2.out",stagger:.04}),gsap.to(r,{yPercent:0,duration:.5,ease:"power2.out",stagger:.04})})),o.addEventListener("mouseleave",(()=>{gsap.to(n,{yPercent:120,duration:.3,ease:"power2.in",stagger:.02}),gsap.to(r,{yPercent:-120,duration:.3,ease:"power2.in",stagger:.02})})))}))}function initAdaptiveLogo(){const e=document.querySelector(".logo");if(!e)return;const t=document.createElement("canvas"),o=t.getContext("2d",{willReadFrequently:!0}),n=50;t.width=n,t.height=n;let r=!1,a=null;function s(e,t,r,a,s){try{const i=e.getBoundingClientRect(),c=t-i.left,l=r-i.top,u=e.naturalWidth/i.width,d=e.naturalHeight/i.height,g=Math.max(0,c*u),m=Math.max(0,l*d),p=Math.min(a*u,e.naturalWidth-g),h=Math.min(s*d,e.naturalHeight-m);return p<=0||h<=0?200:(o.clearRect(0,0,n,n),o.drawImage(e,g,m,p,h,0,0,n,n),function(){try{const e=o.getImageData(0,0,n,n).data;let t=0,r=0;for(let o=0;o<e.length;o+=16){const n=e[o],a=e[o+1],s=e[o+2];if(e[o+3]>0){t+=.299*n+.587*a+.114*s,r++}}return r>0?t/r:200}catch(e){return 200}}())}catch(e){return 200}}function i(e,t,o,n,r){const a=e.querySelector("img");return a&&a.complete?s(a,t,o,n,r):200}function c(e){const t=e.match(/rgba?\((\d+),\s*(\d+),\s*(\d+)/);if(t){return.299*parseInt(t[1])+.587*parseInt(t[2])+.114*parseInt(t[3])}return 200}function l(){const t=function(){const t=e.getBoundingClientRect(),o=t.left,r=t.top,a=Math.min(t.width,n),l=Math.min(t.height,n),u=document.elementsFromPoint(o+a/2,r+l/2);for(const t of u){if(t===e||e.contains(t))continue;const n=getComputedStyle(t).backgroundImage;if(n&&"none"!==n)return i(t,o,r,a,l);if("IMG"===t.tagName)return s(t,o,r,a,l);const u=getComputedStyle(t).backgroundColor;if(u&&"rgba(0, 0, 0, 0)"!==u&&"transparent"!==u)return c(u)}return 200}()<128?"light":"dark";t!==a&&(a=t,"light"===t?(e.classList.add("logo-light"),e.classList.remove("logo-dark")):(e.classList.remove("logo-light"),e.classList.add("logo-dark"))),r=!1}let u=0;function d(){const e=Date.now();e-u<150||(u=e,r||(r=!0,requestAnimationFrame(l)))}window.addEventListener("scroll",d,{passive:!0}),window.addEventListener("resize",d,{passive:!0}),setTimeout(l,100)}function initThemeToggle(){const e=document.createElement("div");e.className="controls-container";const t=document.createElement("button");t.className="theme-toggle",t.setAttribute("aria-label","Toggle dark mode"),t.type="button",t.innerHTML='\n        <div class="theme-toggle-sun">\n            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round">\n                <circle cx="12" cy="12" r="4"/>\n                <line x1="12" y1="2" x2="12" y2="5"/>\n                <line x1="12" y1="19" x2="12" y2="22"/>\n                <line x1="4.22" y1="4.22" x2="6.34" y2="6.34"/>\n                <line x1="17.66" y1="17.66" x2="19.78" y2="19.78"/>\n                <line x1="2" y1="12" x2="5" y2="12"/>\n                <line x1="19" y1="12" x2="22" y2="12"/>\n                <line x1="4.22" y1="19.78" x2="6.34" y2="17.66"/>\n                <line x1="17.66" y1="6.34" x2="19.78" y2="4.22"/>\n            </svg>\n        </div>\n        <div class="theme-toggle-moon">\n            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round">\n                <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>\n            </svg>\n        </div>\n    ',e.appendChild(t),document.body.appendChild(e),ScrollTrigger.create({trigger:".contact-section",start:"top bottom",end:"bottom bottom",onEnter:()=>e.classList.add("hidden"),onLeaveBack:()=>e.classList.remove("hidden")});const o=document.documentElement.getAttribute("data-theme"),n=t.querySelector(".theme-toggle-sun"),r=t.querySelector(".theme-toggle-moon"),a=n.querySelector("svg"),s=r.querySelector("svg");"dark"===o&&(t.style.backgroundColor="rgba(230, 225, 221, 0.3)",n.style.backgroundColor="transparent",r.style.backgroundColor="rgba(26, 26, 26, 0.8)",gsap.set(a,{scale:0}),gsap.set(s,{scale:1}));let i=!1;t.addEventListener("click",(()=>{if(i)return;const e="dark"===document.documentElement.getAttribute("data-theme")?"light":"dark";!function(e){if(i)return;i=!0;const o=.6,c="power3.inOut";e?(gsap.to(n,{backgroundColor:"transparent",duration:o,ease:c}),gsap.to(a,{scale:0,rotation:360,duration:.42,ease:"power4.in"}),gsap.to(r,{backgroundColor:"rgba(26, 26, 26, 0.8)",duration:o,ease:c}),gsap.fromTo(s,{scale:0,rotation:-180},{scale:1,rotation:0,duration:o,delay:.18,ease:"elastic.out(1, 0.5)"}),gsap.to(t,{backgroundColor:"rgba(230, 225, 221, 0.3)",duration:o,ease:c,onComplete:()=>{i=!1}})):(gsap.to(r,{backgroundColor:"transparent",duration:o,ease:c}),gsap.to(s,{scale:0,rotation:180,duration:.42,ease:"power4.in"}),gsap.to(n,{backgroundColor:"rgba(230, 225, 221, 0.8)",duration:o,ease:c}),gsap.fromTo(a,{scale:0,rotation:-360},{scale:1,rotation:0,duration:o,delay:.18,ease:"elastic.out(1, 0.5)"}),gsap.to(t,{backgroundColor:"rgba(26, 26, 26, 0.3)",duration:o,ease:c,onComplete:()=>{i=!1}}))}("dark"===e),document.documentElement.setAttribute("data-theme",e)}))}function initFooterThemeSwitch(){function e(){if(window.innerWidth<768)return;const e="light"===document.documentElement.getAttribute("data-theme")?"dark":"light";document.documentElement.setAttribute("data-theme",e),updateThemeToggleVisuals("dark"===e)}const t=document.querySelector(".projects-section");if(t)return void ScrollTrigger.create({trigger:t,start:"bottom top",onEnter:e,onLeaveBack:e});const o=document.querySelector(".contact-marquee-wrapper"),n=document.body.classList.contains("works-page"),r=document.body.classList.contains("project-page");o&&(n||r)&&ScrollTrigger.create({trigger:o,start:"center center",onEnter:e,onLeaveBack:e})}function initProcessSectionAnimations(){const e=document.querySelector(".process-section");if(!e||"undefined"==typeof gsap||"undefined"==typeof ScrollTrigger)return;const t=e.querySelector(".process-header"),o=e.querySelectorAll(".process-step");t&&(gsap.set(t,{opacity:0,y:40}),ScrollTrigger.create({trigger:e,start:"top 80%",once:!0,onEnter:()=>{gsap.to(t,{opacity:1,y:0,duration:.9,ease:"power3.out"})}})),o.length&&(gsap.set(o,{opacity:0,y:30,scale:.98}),ScrollTrigger.batch(o,{start:"top 85%",once:!0,onEnter:e=>{gsap.to(e,{opacity:1,y:0,scale:1,duration:.7,ease:"power3.out",stagger:.08})}}))}function updateThemeToggleVisuals(e){const t=document.querySelector(".theme-toggle");if(!t)return;const o=t.querySelector(".theme-toggle-sun"),n=t.querySelector(".theme-toggle-moon"),r=o?.querySelector("svg"),a=n?.querySelector("svg");if(!(o&&n&&r&&a))return;const s=.6,i="power3.inOut";e?(gsap.to(o,{backgroundColor:"transparent",duration:s,ease:i}),gsap.to(r,{scale:0,rotation:360,duration:.42,ease:"power4.in"}),gsap.to(n,{backgroundColor:"rgba(26, 26, 26, 0.8)",duration:s,ease:i}),gsap.to(a,{scale:1,rotation:0,duration:s,ease:"elastic.out(1, 0.5)"}),gsap.to(t,{backgroundColor:"rgba(230, 225, 221, 0.3)",duration:s,ease:i})):(gsap.to(n,{backgroundColor:"transparent",duration:s,ease:i}),gsap.to(a,{scale:0,rotation:180,duration:.42,ease:"power4.in"}),gsap.to(o,{backgroundColor:"rgba(230, 225, 221, 0.8)",duration:s,ease:i}),gsap.to(r,{scale:1,rotation:0,duration:s,ease:"elastic.out(1, 0.5)"}),gsap.to(t,{backgroundColor:"rgba(26, 26, 26, 0.3)",duration:s,ease:i}))}lenis.on("scroll",ScrollTrigger.update),gsap.ticker.add((e=>{lenis.raf(1e3*e)})),gsap.ticker.lagSmoothing(0),window.addEventListener("loaderComplete",(()=>{gsap.to(".menu-btn",{duration:1,y:0,opacity:1,ease:"power3.out"}),document.querySelector(".hero-title")&&(gsap.to(".hero-title .reveal-inner-hero",{duration:1.2,y:"0%",stagger:.1,ease:"power3.out"}),gsap.to(".services-text .reveal-inner",{duration:1,y:"0%",stagger:.08,ease:"power3.out"}))})),window.addEventListener("load",(()=>{if(console.log("Window loaded, initializing animation..."),"undefined"==typeof gsap)return void console.error("GSAP is not loaded! Please check your internet connection or the script tag.");const e=document.getElementById("Layer_1");if(e){console.log("Found inline SVG, starting animation...");const t=Array.from(e.querySelectorAll("path")),o=window.matchMedia("(prefers-reduced-motion: reduce)");if(0===t.length)return void console.warn("No paths found in SVG to animate.");o.matches||t.forEach(((e,o)=>{const n=e.getAttribute("d"),r=n&&/z$/i.test(n.trim());console.log(`Animating path ${o+1}/${t.length}`),createLiquidPath(e,{detail:60,tension:1,close:r,range:{x:350,y:350},axis:["x","y"]})}))}initCharSwapAnimation(),initCustomCursor(),initContactWaves(),initPsychedelicDoor(),initDoorNavigation(),initCountdownTimer(),initHeroExitFade(),initWorksPageAnimations();document.querySelectorAll(".work-card-image img").forEach((e=>{const t=e.closest(".work-card"),o="small"===t.dataset.imgScale?1.05:1.15;gsap.set(e,{scale:o}),t.addEventListener("mouseenter",(()=>{gsap.to(e,{scale:1,duration:.8,ease:"power3.out"})})),t.addEventListener("mouseleave",(()=>{gsap.to(e,{scale:o,duration:.6,ease:"power2.inOut"})}))})),initProjectCardAnimations(),initViewAllMagnetic(),initAdaptiveLogo(),initThemeToggle(),initFooterThemeSwitch(),initProcessSectionAnimations()}));